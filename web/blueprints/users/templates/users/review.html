{% extends '_layout.html' %}
{% block content %}
<h3>Performance review</h3>
<div>Name: {{user.name}}</div>
<div>Role: {{user.role}}</div>
<div>Department: {{user.department}}</div>
<div>Manager's Name: {{manager.name}}</div>
<div>Next review date: </div>
<div class="progress" style="width: 25rem">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
        aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
</div>

<div>
    <div>
        {% for x in manager_notes %}
        <div class="card" style="width: 18rem;">
                <h5 class="card-header">Manager's comment:</h5>
                <div class="card-body">
                    <h6 class="card-title">{{ x.review_date }}</h6>
                    <p class="card-text">{{ x.manager_notes }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
    <div>
        {% for x in executive_notes %}
        <div class="card" style="width: 18rem;">
            <h5 class="card-header">My notes: </h5>
            <div class="card-body">
                <h6 class="card-title">{{ x.review_date }}</h6>
                <p class="card-text">{{ x.executive_notes }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if user.is_manager and current_user != user and current_user.department == user.department%}
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
    Manager's Comments
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Manager's Comments</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="manager_form" action="{{ url_for('users.create_manager_notes', id=user.id) }}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <input name="review_date" id="datepicker" width="276" />
                        <script>
                            $('#datepicker').datepicker({
                                uiLibrary: 'bootstrap4'
                            });
                        </script>
                        <label for="comment">Comment:</label>
                        <textarea form="manager_form" name="manager_notes" class="form-control" rows="5"
                            id="comment"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endif %}
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong2">
    My Notes
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModalLong2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle2">My Notes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form id="my_form" action="{{ url_for('users.create_my_notes', id=user.id) }}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                            <input id="input" width="234" />
                            <script>
                                $('#input').datetimepicker({
                                    uiLibrary: 'bootstrap4',
                                    modal: true,
                                    footer: true
                                });
                            </script>
                        <label for="comment">Comment:</label>
                        <textarea form="my_form" name="my_notes" class="form-control" rows="5" id="comment2"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}